# Dependency Track MCP Server Configuration
#
# SECURITY WARNINGS:
# - This file should be copied to .env and never committed to version control
# - The .env file is already excluded via .gitignore
# - Use strong credentials with minimal required permissions
# - Rotate API keys and tokens regularly (e.g., every 90 days)
# - Restrict file permissions: chmod 600 .env (Unix) or use NTFS permissions (Windows)
#
# See SECURITY.md for comprehensive security guidance and OAuth 2.1 setup instructions

# ============================================================================
# OAuth 2.1 Authorization (REQUIRED for MCP Specification Compliance)
# ============================================================================

# Required: OAuth 2.1 token issuer URL
# This should be your OpenID Connect provider (e.g., Auth0, Keycloak, etc.)
# Format: https://your-auth-provider.com
# The server validates that tokens include this issuer in the 'iss' claim
DEPENDENCY_TRACK_OAUTH_ISSUER=https://auth.example.com

# Optional: Expected audience for OAuth tokens
# If configured, tokens must include this value in the 'aud' claim
# Leave empty or omit to skip audience validation
DEPENDENCY_TRACK_OAUTH_AUDIENCE=dependency-track-mcp

# Optional: Space-separated list of required OAuth 2.1 scopes (default: "read:projects read:vulnerabilities")
# The server validates that bearer tokens include all required scopes
# Available scopes:
#   read:projects       - View project information
#   write:projects      - Create, update, delete projects
#   read:components     - View component information
#   read:vulnerabilities - View vulnerabilities and findings
#   write:analysis      - Record analysis decisions (triage)
#   read:metrics        - View security metrics
#   read:policies       - View policy violations
#   upload:bom          - Upload SBOM files (CycloneDX/SPDX)
#   search              - Search across entities
# Customize based on your use case - request only needed scopes
DEPENDENCY_TRACK_OAUTH_REQUIRED_SCOPES=read:projects read:vulnerabilities

# Optional: Enable/disable OAuth 2.1 enforcement (default: true)
# WARNING: Setting to false violates MCP specification requirements
# Only disable for testing or compatibility with non-OAuth clients
DEPENDENCY_TRACK_OAUTH_ENABLED=true

# ============================================================================
# Development Settings (NEVER use in production)
# ============================================================================

# Optional: Allow HTTP URLs for development (default: false)
# Set to true to use HTTP URLs (e.g., http://localhost:8080)
# WARNING: This is DEVELOPMENT ONLY and MUST NOT be enabled in production
# HTTP is insecure and allows man-in-the-middle attacks
# Always use HTTPS in production deployments
# Note: OAuth issuer URL always requires HTTPS, even with this enabled
DEPENDENCY_TRACK_DEV_ALLOW_HTTP=false

# ============================================================================
# Dependency Track Backend Configuration
# ============================================================================

# Required: Base URL of your Dependency Track instance
# MUST use HTTPS in production for secure communication
# Format: https://dtrack.example.com
DEPENDENCY_TRACK_URL=https://dependency-track.example.com

# Required: API key for server-to-API authentication
# This key is used ONLY for backend communication with Dependency Track
# It is NOT used for MCP client authorization (OAuth 2.1 handles that)
# Generate from Administration > Access Management > Teams > [Your Team] > API Keys
# WARNING: Keep this secret! Never commit to version control or share publicly
DEPENDENCY_TRACK_API_KEY=your-dtrack-api-key-here

# Optional: Request timeout in seconds (default: 30)
# Range: 1-300 seconds
DEPENDENCY_TRACK_TIMEOUT=30

# Optional: Verify SSL certificates (default: true)
# WARNING: Only set to false for development/testing with self-signed certificates
# ALWAYS use true in production
DEPENDENCY_TRACK_VERIFY_SSL=true

# Optional: Maximum retry attempts for failed requests (default: 3)
# Range: 0-10 retries
DEPENDENCY_TRACK_MAX_RETRIES=3
