# Dependency Track MCP Server Configuration
#
# SECURITY WARNINGS:
# - Copy this file to .env and never commit .env to version control
# - The .env file is already excluded via .gitignore
# - Use strong credentials with minimal required permissions
# - Rotate API keys and tokens regularly (e.g., every 90 days)
# - Restrict file permissions: chmod 600 .env (Unix) or use NTFS permissions (Windows)

# ============================================================================
# OAuth 2.1 Authorization (REQUIRED)
# ============================================================================

# Required: OAuth 2.1 token issuer URL (OpenID Connect provider)
# Examples:
#   Keycloak: http://localhost:8083/realms/mcp
#   Auth0:    https://your-tenant.auth0.com
DEPENDENCY_TRACK_OAUTH_ISSUER=http://localhost:8083/realms/mcp

# Optional: JWKS URL (auto-derived from issuer if omitted)
# Keycloak format: {issuer}/protocol/openid-connect/certs
# DEPENDENCY_TRACK_OAUTH_JWKS_URL=http://localhost:8083/realms/mcp/protocol/openid-connect/certs

# Required: Expected audience (aud claim) in access tokens
# Configure this in your OAuth provider (see KEYCLOAK_SETUP.md for Keycloak)
DEPENDENCY_TRACK_OAUTH_AUDIENCE=mcp-api

# Optional: Space-separated required scopes (default: "read:projects read:vulnerabilities")
# Available scopes:
#   read:projects, write:projects, read:components, read:vulnerabilities,
#   write:analysis, read:metrics, read:policies, upload:bom, search
DEPENDENCY_TRACK_OAUTH_REQUIRED_SCOPES=read:projects read:vulnerabilities

# Optional: Resource URI for /.well-known/oauth-protected-resource
DEPENDENCY_TRACK_OAUTH_RESOURCE_URI=http://localhost:9000/mcp

# ============================================================================
# Dependency Track Backend
# ============================================================================

# Required: Base URL of your Dependency Track instance
DEPENDENCY_TRACK_URL=http://localhost:8081

# Required: API key for backend communication
# Generate from: Administration > Access Management > Teams > API Keys
DEPENDENCY_TRACK_API_KEY=your-dependency-track-api-key-here

# Optional: Request timeout in seconds (default: 30)
DEPENDENCY_TRACK_TIMEOUT=30

# Optional: Verify SSL certificates (default: true)
DEPENDENCY_TRACK_VERIFY_SSL=true

# Optional: Maximum retry attempts (default: 3)
DEPENDENCY_TRACK_MAX_RETRIES=3

# ============================================================================
# Server Settings
# ============================================================================

# Host and port for the MCP server with OAuth
DEPENDENCY_TRACK_SERVER_HOST=0.0.0.0
DEPENDENCY_TRACK_SERVER_PORT=9000

# ============================================================================
# Development Settings (NEVER use in production)
# ============================================================================

# Allow HTTP URLs (default: false) - DEVELOPMENT ONLY
DEPENDENCY_TRACK_DEV_ALLOW_HTTP=true
