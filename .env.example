# Dependency Track MCP Server Configuration
#
# SECURITY WARNINGS:
# - Copy this file to .env and never commit .env to version control
# - The .env file is already excluded via .gitignore
# - Use strong credentials with minimal required permissions
# - Rotate API keys and tokens regularly (e.g., every 90 days)
# - Restrict file permissions: chmod 600 .env (Unix) or use NTFS permissions (Windows)

# ============================================================================
# OAuth 2.1 Authorization (REQUIRED)
# ============================================================================

# Required: OAuth 2.1 token issuer URL (OpenID Connect provider)
# Production examples:
#   Keycloak: https://keycloak.example.com/realms/mcp
#   Auth0:    https://your-tenant.auth0.com
# Development (with MCP_DEV_ALLOW_HTTP=true):
#   Keycloak: http://localhost:8083/realms/mcp
MCP_OAUTH_ISSUER=https://keycloak.example.com/realms/mcp

# Optional: JWKS URL (auto-derived from issuer if omitted)
# Keycloak format: {issuer}/protocol/openid-connect/certs
# MCP_OAUTH_JWKS_URL=https://localhost:8083/realms/mcp/protocol/openid-connect/certs

# Required: Expected audience (aud claim) in access tokens
# Configure this in your OAuth provider (see KEYCLOAK_SETUP.md for Keycloak)
MCP_OAUTH_AUDIENCE=mcp-api

# Optional: Space-separated required scopes (default: "read:projects read:vulnerabilities")
# Available scopes:
#   read:projects, write:projects, read:components, read:vulnerabilities,
#   write:analysis, read:metrics, read:policies, upload:bom, search
MCP_OAUTH_REQUIRED_SCOPES=read:projects read:vulnerabilities

# Optional: Resource URI for /.well-known/oauth-protected-resource
MCP_OAUTH_RESOURCE_URI=https://localhost:9000/mcp

# ============================================================================
# Dependency Track Backend
# ============================================================================

# Required: Base URL of your Dependency Track instance
# Production: https://dtrack.example.com
# Development (with MCP_DEV_ALLOW_HTTP=true): http://localhost:8081
DEPENDENCY_TRACK_URL=https://dtrack.example.com

# Required: API key for backend communication
# Generate from: Administration > Access Management > Teams > API Keys
DEPENDENCY_TRACK_API_KEY=your-dependency-track-api-key-here

# Optional: Request timeout in seconds (default: 30)
DEPENDENCY_TRACK_TIMEOUT=30

# Optional: Verify SSL certificates (default: true)
DEPENDENCY_TRACK_VERIFY_SSL=true

# Optional: Maximum retry attempts (default: 3)
DEPENDENCY_TRACK_MAX_RETRIES=3

# ============================================================================
# Server Settings
# ============================================================================

# Host and port for the MCP server with OAuth
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=9000

# Required: TLS certificate and key for HTTPS (PEM content)
# Tip: Use \n for newlines if setting via environment variable.
MCP_SERVER_TLS_CERT="-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"
MCP_SERVER_TLS_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----"

# Optional: CA bundle (client cert verification, PEM content)
# MCP_SERVER_TLS_CA_CERTS="-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"

# ============================================================================
# Development Settings (NEVER use in production)
# ============================================================================

# Allow HTTP URLs (default: false) - DEVELOPMENT ONLY
# MCP_DEV_ALLOW_HTTP=true
